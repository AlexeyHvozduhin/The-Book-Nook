!function(){var e=document.querySelector(".shopping-book-list"),o=document.querySelector(".first-btn"),t=document.querySelector(".prev-btn"),n=document.querySelector(".prev-numer-btn"),l=document.querySelector(".now-btn"),c=document.querySelector(".next-numer-btn"),a=document.querySelector(".next-btn"),r=document.querySelector(".last-btn");function i(o){var t;(t=o,fetch("https://books-backend.p.goit.global/books/".concat(t)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))).then((function(o){var t=o._id,n=o.book_image,l=o.author,c=o.title,a=o.description,r=o.list_name;e.insertAdjacentHTML("beforeend",'<li class="shoping-book-card '.concat(t.slice(-5),'">\n              <div class="shoping-book-card-img">\n        <img src="').concat(n,'" alt="').concat(t,'"width="335" height="485">\n      </div>\n      <div class="shoping-book-card-text">\n        <div class="shoping-book-card-title_and_ganre">\n            <h3 class="shoping-book-card-title">').concat(c,'</h3>\n            <h3 class="shoping-book-card-title">').concat(t,'</h3>\n            <h4 class="shoping-book-card-ganre">').concat(r,'</h4>\n            <p class="shoping-book-card-description">').concat(a,'</p>\n        </div>\n        <h4 class="shoping-book-card-author">').concat(l,'</h4>\n      </div>\n       <div class="shoping-list-images">\n          <ul class="list-images">\n            <li><a href="https://www.amazon.com/" class="image-link image-link-amazon"></a></li>\n            <li><a href="https://www.openebooks.org/" class="image-link image-link-openBook"></a></li>\n            <li><a href="https://bookshop.org/" class="image-link image-link-bookShop"></a></li>\n          </ul>\n        </div>\n      <button class="shoping-list-btn shoping-list-btn').concat(c.toLowerCase().replace(/\s/g,"").replace(/[.,';!&:]/g,""),'">\n      \n    </button>\n            </li>')),console.log("ОТРИСОВЫВАЮ ".concat(t));var s=document.querySelector(".shoping-list-btn".concat(c.toLowerCase().replace(/\s/g,"").replace(/[.,;!&:]/g,"")));s.addEventListener("click",(function(){console.log("DO"),console.log(localStorage);var o=s.closest(".shoping-book-card");if(o){e.removeChild(o),localStorage.removeItem(t);var n=document.querySelectorAll(".shoping-book-card");if(0===n.length){var l=document.querySelector(".empty-shopping-list-div"),c=document.querySelector(".pagination");l.style.display="block",c.style.display="none"}n.length<3&&localStorage.length>3&&(i(function(){var e=Object.keys(localStorage),o=Array.from(document.querySelectorAll(".shoping-book-card")).map((function(e){return e.classList[1]})),t=!0,n=!1,l=void 0;try{for(var c,a=e[Symbol.iterator]();!(t=(c=a.next()).done);t=!0){var r=c.value;if("BOOK"===localStorage[r]){var i=r.slice(-5);if(!o.includes(i))return console.log("firstID"),console.log(r),r}}}catch(e){n=!0,l=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw l}}}()),console.log("Запускает отрисовку"))}}))}))}function s(o){var t=3*(o-1),n=t+3,l=Object.keys(localStorage);if(console.log(localStorage),e.innerHTML="",localStorage.length>1)for(var c=t;c<n&&c<l.length;c++){var a=void 0;if(console.log("ЭЛЕМЕНТ"),a="theme"===l[c]?"theme"==l[l.lendth-1]?l[l.length-2]:l[l.length-1]:l[c],console.log(l),console.log(l[c]),console.log("Количество єлементов в списке: ".concat(l.length)),console.log("ПОСЛЕДНИЙ ЭЛЕМЕНТ ".concat(l[l.length-1])),"BOOK"===localStorage[a]){var r=document.querySelector(".empty-shopping-list-div");i(a),document.querySelector(".pagination").style.display="flex",r.style.display="none"}}else document.querySelector(".empty-shopping-list-div").style.display="block",document.querySelector(".pagination").style.display="none"}console.log("Количество элементов в локальном хранилище: "+localStorage.length),console.log("ОБДЖЕКТ КЕЙС"),console.log(Object.keys(localStorage));var g=1;function d(){var e=Object.keys(localStorage).filter((function(e){return"BOOK"===localStorage[e]})).length,o=Math.ceil(e/3);n.textContent=g-1,l.textContent=g,c.textContent=g+1,1==g&&(n.textContent="-"),g==o&&(c.textContent="-")}o.addEventListener("click",(function(){g=1,d(),s(g)})),t.addEventListener("click",(function(){g>1&&(g--,d(),s(g))})),n.addEventListener("click",(function(){g>1&&(g--,d(),s(g))})),c.addEventListener("click",(function(){var e=Object.keys(localStorage).filter((function(e){return"BOOK"===localStorage[e]})).length,o=Math.ceil(e/3);g<o&&(g++,d(),s(g))})),a.addEventListener("click",(function(){var e=Object.keys(localStorage).filter((function(e){return"BOOK"===localStorage[e]})).length,o=Math.ceil(e/3);g<o&&(g++,d(),s(g))})),r.addEventListener("click",(function(){var e=Object.keys(localStorage).filter((function(e){return"BOOK"===localStorage[e]})).length,o=Math.ceil(e/3);g=o,d(),s(g)})),d(),s(g)}();
//# sourceMappingURL=shoping-list.a908dade.js.map
