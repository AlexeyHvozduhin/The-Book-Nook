{"mappings":"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","sources":["src/shoping-list.js"],"sourcesContent":["function servicesSelectedBook(idBook) {\n  return fetch(`https://books-backend.p.goit.global/books/${idBook}`).then(\n    resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    }\n  );\n}\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\nconst booksPerPage = 3; // Количество книг на одной странице\nconst bookList = document.querySelector('.shopping-book-list');\n\nconst firstBtn = document.querySelector('.first-btn');\nconst prevBtn = document.querySelector('.prev-btn');\nconst prevNumerBtn = document.querySelector('.prev-numer-btn');\nconst nowBtn = document.querySelector('.now-btn');\nconst nextNumerBtn = document.querySelector('.next-numer-btn');\nconst nextBtn = document.querySelector('.next-btn');\nconst lastBtn = document.querySelector('.last-btn');\n\nconsole.log(\n  'Количество элементов в локальном хранилище: ' + localStorage.length\n);\n\nfunction secondToLastKeyFromLocalStorage() {\n  console.log('ИЩЕТ ПРЕДПОСЛЕДНИЙ ЭЛЕМЕТ');\n  const keys = Object.keys(localStorage);\n\n  if (keys.length >= 2) {\n    console.log(keys);\n    if (keys[keys.length - 2] == 'theme') return keys[keys.length - 1];\n    else return keys[keys.length - 2];\n  }\n}\n\nfunction searchMoreElement() {\n  const keys = Object.keys(localStorage);\n  const existingIds = Array.from(\n    document.querySelectorAll('.shoping-book-card')\n  ).map(element => element.classList[1]);\n\n  for (const key of keys) {\n    // Проверяем, что значение по ключу равно 'BOOK'\n    if (localStorage[key] === 'BOOK') {\n      // Получаем последние 5 цифр из ключа\n      const idFromKey = key.slice(-5);\n\n      // Проверяем, что такого id нет среди существующих на странице\n      if (!existingIds.includes(idFromKey)) {\n        console.log('firstID');\n        console.log(key);\n        return key; // Возвращаем первый найденный отсутствующий id\n      }\n    }\n  }\n}\n\nconsole.log('ОБДЖЕКТ КЕЙС');\nconsole.log(Object.keys(localStorage));\n\nfunction renderingLiElement(key) {\n  servicesSelectedBook(key).then(\n    ({ _id, book_image, author, title, description, list_name }) => {\n      bookList.insertAdjacentHTML(\n        'beforeend',\n        `<li class=\"shoping-book-card ${_id.slice(-5)}\">\n              <div class=\"shoping-book-card-img\">\n        <img src=\"${book_image}\" alt=\"${_id}\"width=\"335\" height=\"485\">\n      </div>\n      <div class=\"shoping-book-card-text\">\n        <div class=\"shoping-book-card-title_and_ganre\">\n            <h3 class=\"shoping-book-card-title\">${title}</h3>\n            <h3 class=\"shoping-book-card-title\">${_id}</h3>\n            <h4 class=\"shoping-book-card-ganre\">${list_name}</h4>\n            <p class=\"shoping-book-card-description\">${description}</p>\n        </div>\n        <h4 class=\"shoping-book-card-author\">${author}</h4>\n      </div>\n       <div class=\"shoping-list-images\">\n          <ul class=\"list-images\">\n            <li><a href=\"https://www.amazon.com/\" class=\"image-link image-link-amazon\"></a></li>\n            <li><a href=\"https://www.openebooks.org/\" class=\"image-link image-link-openBook\"></a></li>\n            <li><a href=\"https://bookshop.org/\" class=\"image-link image-link-bookShop\"></a></li>\n          </ul>\n        </div>\n      <button class=\"shoping-list-btn shoping-list-btn${title\n        .toLowerCase()\n        .replace(/\\s/g, '')\n        .replace(/[.,';!&:]/g, '')}\">\n      \n    </button>\n            </li>`\n      );\n      console.log(`ОТРИСОВЫВАЮ ${_id}`);\n      const deleteButton = document.querySelector(\n        `.shoping-list-btn${title\n          .toLowerCase()\n          .replace(/\\s/g, '')\n          .replace(/[.,;!&:]/g, '')}`\n      );\n      // КНОПКА УДАЛЕНИЯ\n      ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n      deleteButton.addEventListener('click', () => {\n        console.log('DO');\n        console.log(localStorage);\n        const listItem = deleteButton.closest('.shoping-book-card');\n        if (listItem) {\n          bookList.removeChild(listItem);\n          localStorage.removeItem(_id);\n\n          const remainingItems =\n            document.querySelectorAll('.shoping-book-card');\n          if (remainingItems.length === 0) {\n            const clearShopList = document.querySelector(\n              '.empty-shopping-list-div'\n            );\n            const pagination = document.querySelector('.pagination');\n\n            clearShopList.style.display = 'block';\n            pagination.style.display = 'none';\n          }\n          if (remainingItems.length < 3 && localStorage.length > 3) {\n            renderingLiElement(searchMoreElement());\n            console.log('Запускает отрисовку');\n          }\n        }\n      });\n      // КОНЕЦ КНОПКИ УДАЛЕНИЯ\n    }\n  );\n}\n\nfunction displayPage(pageNumber) {\n  const startIndex = (pageNumber - 1) * booksPerPage;\n  const endIndex = startIndex + booksPerPage;\n  const keys = Object.keys(localStorage);\n  console.log(localStorage);\n  bookList.innerHTML = ''; // Очищаем список перед добавлением новых элементов\n  if (localStorage.length > 1) {\n    for (let i = startIndex; i < endIndex && i < keys.length; i++) {\n      let key;\n      console.log('ЭЛЕМЕНТ');\n      // ТУТ ОШИБКА, СКОРЕЕ ВСЕГО\n      if (keys[i] === 'theme')\n        if (keys[keys.lendth - 1] == 'theme') key = keys[keys.length - 2];\n        else key = keys[keys.length - 1];\n      else key = keys[i];\n\n      console.log(keys);\n      console.log(keys[i]);\n      console.log(`Количество єлементов в списке: ${keys.length}`);\n      console.log(`ПОСЛЕДНИЙ ЭЛЕМЕНТ ${keys[keys.length - 1]}`);\n\n      if (localStorage[key] === 'BOOK') {\n        const clearShopList = document.querySelector(\n          '.empty-shopping-list-div'\n        );\n\n        renderingLiElement(key);\n\n        const pagination = document.querySelector('.pagination');\n        pagination.style.display = 'flex';\n        clearShopList.style.display = 'none';\n      }\n    }\n  } else {\n    const clearShopList = document.querySelector('.empty-shopping-list-div');\n    clearShopList.style.display = 'block';\n\n    const pagination = document.querySelector('.pagination');\n    pagination.style.display = 'none';\n  }\n}\n\nlet currentPage = 1;\nfunction numerationButton() {\n  const totalBooks = Object.keys(localStorage).filter(\n    key => localStorage[key] === 'BOOK'\n  ).length;\n  const totalPages = Math.ceil(totalBooks / booksPerPage);\n\n  prevNumerBtn.textContent = currentPage - 1;\n  nowBtn.textContent = currentPage;\n  nextNumerBtn.textContent = currentPage + 1;\n\n  if (currentPage == 1) prevNumerBtn.textContent = '-';\n  if (currentPage == totalPages) nextNumerBtn.textContent = '-';\n}\n\nfirstBtn.addEventListener('click', () => {\n  currentPage = 1;\n  numerationButton();\n  displayPage(currentPage);\n});\n\nprevBtn.addEventListener('click', () => {\n  if (currentPage > 1) {\n    currentPage--;\n    numerationButton();\n    displayPage(currentPage);\n  }\n});\n\nprevNumerBtn.addEventListener('click', () => {\n  if (currentPage > 1) {\n    currentPage--;\n    numerationButton();\n    displayPage(currentPage);\n  }\n});\n\nnextNumerBtn.addEventListener('click', () => {\n  const totalBooks = Object.keys(localStorage).filter(\n    key => localStorage[key] === 'BOOK'\n  ).length;\n  const totalPages = Math.ceil(totalBooks / booksPerPage);\n  if (currentPage < totalPages) {\n    currentPage++;\n    numerationButton();\n    displayPage(currentPage);\n  }\n});\n\nnextBtn.addEventListener('click', () => {\n  const totalBooks = Object.keys(localStorage).filter(\n    key => localStorage[key] === 'BOOK'\n  ).length;\n  const totalPages = Math.ceil(totalBooks / booksPerPage);\n  if (currentPage < totalPages) {\n    currentPage++;\n    numerationButton();\n    displayPage(currentPage);\n  }\n});\n\nlastBtn.addEventListener('click', () => {\n  const totalBooks = Object.keys(localStorage).filter(\n    key => localStorage[key] === 'BOOK'\n  ).length;\n  const totalPages = Math.ceil(totalBooks / booksPerPage);\n  currentPage = totalPages;\n  numerationButton();\n  displayPage(currentPage);\n});\n\nnumerationButton();\ndisplayPage(currentPage);\n"],"names":["$31701cf0e5de0757$var$bookList","document","querySelector","$31701cf0e5de0757$var$firstBtn","$31701cf0e5de0757$var$prevBtn","$31701cf0e5de0757$var$prevNumerBtn","$31701cf0e5de0757$var$nowBtn","$31701cf0e5de0757$var$nextNumerBtn","$31701cf0e5de0757$var$nextBtn","$31701cf0e5de0757$var$lastBtn","$31701cf0e5de0757$var$renderingLiElement","key","idBook","fetch","concat","then","resp","ok","Error","statusText","json","param","_id","book_image","author","title","description","list_name","insertAdjacentHTML","slice","toLowerCase","replace","console","log","deleteButton","addEventListener","localStorage","listItem","closest","removeChild","removeItem","remainingItems","querySelectorAll","length","clearShopList","pagination","style","display","keys","Object","existingIds","Array","from","map","element","classList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","idFromKey","includes","err","return","$31701cf0e5de0757$var$searchMoreElement","$31701cf0e5de0757$var$displayPage","pageNumber","startIndex","endIndex","innerHTML","i","lendth","$31701cf0e5de0757$var$currentPage","$31701cf0e5de0757$var$numerationButton","totalBooks","filter","totalPages","Math","ceil","textContent"],"version":3,"file":"shoping-list.a908dade.js.map"}